<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 æ±äº¬å¤§çœ¾é‹è¼¸åŠ©æ‰‹</title>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        [v-cloak] { display: none; }
        body { font-family: -apple-system, "Noto Sans TC", sans-serif; -webkit-tap-highlight-color: transparent; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .tab-active { color: #2563eb; border-bottom: 2px solid #2563eb; }
        .btn-transit { background: #2563eb; color: white; } /* è½‰ä¹˜é¡è‰²æ”¹ç‚ºè—è‰² */
    </style>
</head>
<body class="bg-gray-50 pb-20">

    <div id="app" v-cloak>
        <header class="p-4 bg-white border-b sticky top-0 z-50 flex justify-between items-center shadow-sm">
            <div>
                <h1 class="font-bold text-lg leading-none">TOKYO 2026</h1>
                <p class="text-[10px] text-gray-400 mt-1 uppercase">Transit & WBC Guide</p>
            </div>
            <div class="text-right">
                <span class="text-[10px] text-gray-400 block">åŒ¯ç‡ JPY/TWD</span>
                <span class="text-lg font-mono font-bold text-blue-600">{{ exchangeRate }}</span>
            </div>
        </header>

        <nav class="sticky top-[61px] z-40 bg-white/90 backdrop-blur border-b">
            <div class="flex overflow-x-auto p-3 space-x-2 no-scrollbar">
                <button v-for="(day, index) in itinerary" :key="index" 
                    @click="currentDayIndex = index"
                    :class="['px-5 py-2 rounded-xl text-sm font-bold transition-all', 
                            currentDayIndex === index ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-100 text-gray-400']">
                    Day {{ index + 1 }}
                </button>
            </div>
        </nav>

        <main class="p-4 space-y-4">
            <div class="bg-blue-50 border border-blue-100 rounded-2xl p-3 flex items-center mb-2">
                <span class="text-xl mr-3">ğŸ¨</span>
                <div>
                    <p class="text-[10px] text-blue-500 font-bold uppercase">æœ¬æ—¥ä½å®¿</p>
                    <p class="text-sm font-bold text-blue-900">{{ itinerary[currentDayIndex].hotel }}</p>
                </div>
            </div>

            <div v-for="(spot, sIndex) in itinerary[currentDayIndex].spots" :key="spot.id" 
                 class="bg-white rounded-3xl p-5 shadow-sm border border-gray-100 relative">
                
                <div class="flex justify-between items-center mb-2">
                    <span :class="['text-[10px] px-2 py-0.5 rounded font-bold tracking-widest uppercase', typeClass(spot.type)]">
                        {{ spot.type }}
                    </span>
                    <button @click="removeSpot(sIndex)" class="text-gray-200 hover:text-red-400">âœ•</button>
                </div>

                <h3 class="font-bold text-lg text-gray-800 leading-tight">{{ spot.name }}</h3>
                <p class="text-sm text-gray-500 mt-2 mb-4 leading-relaxed whitespace-pre-line">{{ spot.note }}</p>

                <div v-if="spot.photo" class="mb-4 rounded-2xl overflow-hidden border border-gray-100">
                    <img :src="spot.photo" class="w-full h-48 object-cover shadow-inner">
                </div>

                <div class="flex gap-2">
                    <a :href="'https://www.google.com/maps/dir/?api=1&destination=' + encodeURIComponent(spot.name) + '&travelmode=transit'" 
                       target="_blank"
                       class="flex-1 btn-transit flex items-center justify-center py-3.5 rounded-2xl text-sm font-bold shadow-lg shadow-blue-100 active:scale-95 transition">
                       <span class="mr-2">ğŸšƒ</span> ä¹˜æ›æ¡ˆå…§ / å°èˆª
                    </a>
                    <label class="w-14 bg-gray-100 flex items-center justify-center rounded-2xl cursor-pointer active:bg-gray-200">
                        ğŸ“· <input type="file" class="hidden" @change="uploadPhoto($event, sIndex)">
                    </label>
                </div>
            </div>

            <button @click="isModalOpen = true" class="w-full py-5 border-2 border-dashed border-gray-300 rounded-3xl text-gray-400 font-bold hover:bg-gray-100 transition">
                + æ–°å¢è¡Œç¨‹åœ°é»
            </button>
        </main>

        <div class="fixed bottom-4 left-4 right-4 h-14 bg-black/90 backdrop-blur rounded-2xl shadow-2xl z-50 flex items-center justify-around px-4">
            <button @click="currentDayIndex = 0" class="text-white text-xs flex flex-col items-center">
                <span class="text-lg">ğŸ—“ï¸</span> è¡Œç¨‹
            </button>
            <button @click="resetData" class="text-gray-400 text-xs flex flex-col items-center">
                <span class="text-lg">ğŸ”„</span> é‡ç½®
            </button>
        </div>

        <div v-if="isModalOpen" class="fixed inset-0 bg-black/60 z-[100] flex items-end">
            <div class="bg-white w-full rounded-t-[32px] p-6 pb-12 shadow-2xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold italic">ADD NEW SPOT</h2>
                    <button @click="isModalOpen = false" class="text-2xl text-gray-300">âœ•</button>
                </div>
                <input v-model="newSpot.name" placeholder="æ™¯é»æˆ–é¤å»³åç¨±" class="w-full p-4 bg-gray-50 rounded-2xl mb-3 focus:ring-2 focus:ring-blue-500 outline-none">
                <textarea v-model="newSpot.note" placeholder="å‡ºå£è³‡è¨Šã€å¿…åƒæ¸…å–®ç­‰..." class="w-full p-4 bg-gray-50 rounded-2xl mb-4 h-24 outline-none"></textarea>
                <div class="flex gap-2 mb-6">
                    <button v-for="t in ['food', 'spot', 'shop']" @click="newSpot.type = t"
                        :class="['flex-1 py-3 rounded-xl text-[10px] font-black tracking-widest transition', newSpot.type === t ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-400']">
                        {{ t.toUpperCase() }}
                    </button>
                </div>
                <button @click="addSpot" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-bold shadow-xl">ç¢ºèªå„²å­˜</button>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        const STORAGE_KEY = 'tokyo_transit_v1';

        createApp({
            data() {
                return {
                    exchangeRate: '0.2115',
                    currentDayIndex: 0,
                    isModalOpen: false,
                    newSpot: { name: '', note: '', type: 'spot', photo: null },
                    itinerary: []
                }
            },
            methods: {
                typeClass(type) {
                    const classes = { food: 'bg-red-50 text-red-500', spot: 'bg-indigo-50 text-indigo-500', shop: 'bg-emerald-50 text-emerald-500' };
                    return classes[type] || 'bg-gray-50 text-gray-500';
                },
                addSpot() {
                    if (!this.newSpot.name) return;
                    this.itinerary[this.currentDayIndex].spots.push({ ...this.newSpot, id: Date.now() });
                    this.saveData();
                    this.newSpot = { name: '', note: '', type: 'spot', photo: null };
                    this.isModalOpen = false;
                },
                removeSpot(idx) {
                    if (confirm('åˆªé™¤æ­¤è¡Œç¨‹ï¼Ÿ')) {
                        this.itinerary[this.currentDayIndex].spots.splice(idx, 1);
                        this.saveData();
                    }
                },
                uploadPhoto(event, index) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.itinerary[this.currentDayIndex].spots[index].photo = e.target.result;
                            this.saveData();
                        };
                        reader.readAsDataURL(file);
                    }
                },
                saveData() { localStorage.setItem(STORAGE_KEY, JSON.stringify(this.itinerary)); },
                resetData() { if(confirm('é‡ç½®æ‰€æœ‰è³‡æ–™ï¼Ÿ')) { localStorage.removeItem(STORAGE_KEY); location.reload(); } },
                init() {
                    const saved = localStorage.getItem(STORAGE_KEY);
                    if (saved) {
                        this.itinerary = JSON.parse(saved);
                    } else {
                        // æ ¹æ“š PDF é è¨­
                        this.itinerary = [
                            { date: '3/05', hotel: 'æ¸…æ¾„ç™½æ²³ Comfort Hotel', spots: [{ id: 1, name: 'ç¾½ç”°æ©Ÿå ´ ç¬¬3èˆªå»ˆ', type: 'spot', note: 'æ­ä¹˜äº¬æ€¥ç·šæˆ–å–®è»Œé›»è»Šå‰å¾€å¸‚å€' }, { id: 2, name: 'æ±äº¬å·¨è›‹', type: 'spot', note: 'WBC å°æ¾³æˆ° 12:00' }] },
                            { date: '3/06', hotel: 'æ¸…æ¾„ç™½æ²³ Comfort Hotel', spots: [{ id: 3, name: 'è‚‰ã®ç”°ã˜ã¾', type: 'food', note: 'å¿…é»ï¼šç‰¹é¸æ¾é˜ªç‰›ç‡’è‚‰\nå¾æ¸…æ¾„ç™½æ²³ç«™æ­¥è¡Œç´„10åˆ†é˜' }, { id: 4, name: 'éŒ¦ç³¸ç”º Replay Bar', type: 'food', note: 'Mr.Children è–åœ°' }, { id: 5, name: 'æ±äº¬å·¨è›‹', type: 'spot', note: 'WBC å°æ—¥å¤§æˆ° 19:00' }] },
                            { date: '3/07', hotel: 'æ¸…æ¾„ç™½æ²³ Comfort Hotel', spots: [{ id: 6, name: 'Artizon ç¾è¡“é¤¨', type: 'spot', note: 'è«å…§å±• (äº¬æ©‹ç«™/æ±äº¬ç«™æ­¥è¡Œ)' }, { id: 7, name: 'å°ç¶²ç¥ç¤¾', type: 'spot', note: 'äººå½¢ç”ºç«™ A6å‡ºå£æ­¥è¡Œ5åˆ†é˜' }] },
                            { date: '3/08', hotel: 'æ¸…æ¾„ç™½æ²³ Comfort Hotel', spots: [{ id: 8, name: 'æ±äº¬å·¨è›‹', type: 'spot', note: 'WBC å°éŸ“å¤§æˆ° 12:00' }] },
                            { date: '3/09', hotel: 'JRæ±æ—¥æœ¬é…’åº— Mets æ©«æ¿±', spots: [{ id: 9, name: 'æ©«æ¿±ç´…ç£šå€‰åº«', type: 'shop', note: 'å¾æ«»æœ¨ç”ºç«™æ­ä¹˜å¸‚ç‡Ÿå·´å£«æˆ–æ­¥è¡Œ' }] },
                            { date: '3/10', hotel: 'JRæ±æ—¥æœ¬é…’åº— Mets æ©«æ¿±', spots: [{ id: 10, name: 'éŒå€‰å¤§ä½›', type: 'spot', note: 'æ±Ÿä¹‹é›»ã€Œé•·è°·ç«™ã€ä¸‹è»Š' }, { id: 11, name: 'éŒå€‰é«˜æ ¡å‰', type: 'spot', note: 'çŒç±ƒé«˜æ‰‹å¹³äº¤é“' }] },
                            { date: '3/11', hotel: 'Home', spots: [{ id: 12, name: 'ç¾½ç”°æ©Ÿå ´', type: 'spot', note: 'è¾¦ç†ç™»æ©Ÿ è¿”å®¶' }] }
                        ];
                    }
                }
            },
            created() {
                this.init();
                fetch('https://api.exchangerate-api.com/v4/latest/JPY').then(r => r.json()).then(d => this.exchangeRate = d.rates.TWD.toFixed(4)).catch(()=>{});
            }
        }).mount('#app');
    </script>
</body>
</html>